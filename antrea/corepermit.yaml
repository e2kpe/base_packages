apiVersion: crd.antrea.io/v1alpha1
kind: ClusterNetworkPolicy
metadata:
  name: allow-all-egress-dns-service
  namespace: packages
spec:
  priority: 8
  tier: securityops
  appliedTo:
    - namespaceSelector: {}
    - group: "test-grp-svc-ref"
#        matchLabels:
#          k8s-app: kube-dns
  ingress:
      - action: Allow
        from:
          - ipBlock:
              cidr: 172.16.40.0/24
        name: givemealog
        enableLogging: true
      - action: Allow
        from:
          - ipBlock:
              cidr: 172.16.80.0/24
        name: givemealog2
        enableLogging: true
  egress:
    - action: Allow
      toServices:
        - name: kube-dns
          namespace: kube-system
        - name: nginx-source-wkld
          namespace: default
      name: "allow-nginx-service"
